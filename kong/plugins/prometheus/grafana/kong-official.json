{
  "__inputs":[
     {
        "name":"DS_PROMETHEUS",
        "label":"Prometheus",
        "description":"",
        "type":"datasource",
        "pluginId":"prometheus",
        "pluginName":"Prometheus"
     }
  ],
  "__requires":[
     {
        "type":"panel",
        "id":"gauge",
        "name":"Gauge",
        "version":""
     },
     {
        "type":"grafana",
        "id":"grafana",
        "name":"Grafana",
        "version":"8.4.5"
     },
     {
        "type":"panel",
        "id":"graph",
        "name":"Graph",
        "version":""
     },
     {
        "type":"panel",
        "id":"heatmap",
        "name":"Heatmap",
        "version":""
     },
     {
        "type":"datasource",
        "id":"prometheus",
        "name":"Prometheus",
        "version":"1.0.0"
     },
     {
        "type":"panel",
        "id":"singlestat",
        "name":"Singlestat",
        "version":""
     },
     {
        "type":"panel",
        "id":"table",
        "name":"Table",
        "version":""
     }
  ],
  "annotations":{
     "list":[
        {
           "builtIn":1,
           "datasource":"${DS_PROMETHEUS}",
           "enable":true,
           "hide":true,
           "iconColor":"rgba(0, 211, 255, 1)",
           "name":"Annotations & Alerts",
           "type":"dashboard"
        }
     ]
  },
  "description":"Dashboard that graphs metrics exported via Prometheus plugin in Kong (http://github.com/kong/kong)",
  "editable":true,
  "gnetId":7424,
  "graphTooltip":0,
  "id":null,
  "iteration":1662693484232,
  "links":[
     {
        "asDropdown":false,
        "icon":"info",
        "includeVars":false,
        "keepTime":false,
        "tags":[

        ],
        "targetBlank":true,
        "title":"Prometheus Plugin Config",
        "tooltip":"",
        "type":"link",
        "url":"https://docs.konghq.com/hub/kong-inc/prometheus/"
     }
  ],
  "panels":[
     {
        "collapsed":true,
        "datasource":"${DS_PROMETHEUS}",
        "gridPos":{
           "h":1,
           "w":24,
           "x":0,
           "y":0
        },
        "id":38,
        "panels":[
           {
              "aliasColors":{

              },
              "bars":false,
              "dashLength":10,
              "dashes":false,
              "datasource":"${DS_PROMETHEUS}",
              "fieldConfig":{
                 "defaults":{
                    "links":[

                    ],
                    "custom":{
                       "fillOpacity":10,
                       "showPoints":"never",
                       "spanNulls":true
                    },
                    "unit":"reqps"
                 },
                 "overrides":[

                 ]
              },
              "fill":1,
              "fillGradient":0,
              "gridPos":{
                 "h":7,
                 "w":24,
                 "x":0,
                 "y":1
              },
              "hiddenSeries":false,
              "id":1,
              "legend":{
                 "alignAsTable":false,
                 "avg":false,
                 "current":false,
                 "max":false,
                 "min":false,
                 "rightSide":false,
                 "show":true,
                 "total":false,
                 "values":false
              },
              "lines":true,
              "linewidth":1,
              "links":[

              ],
              "nullPointMode":"null",
              "options":{
                 "alertThreshold":true,
                 "legend":{
                    "calcs":[

                    ],
                    "displayMode":"hidden",
                    "placement":"bottom"
                 },
                 "tooltip":{
                    "mode":"multi",
                    "sort":"none"
                 }
              },
              "paceLength":10,
              "percentage":false,
              "pluginVersion":"8.4.5",
              "pointradius":5,
              "points":false,
              "renderer":"flot",
              "seriesOverrides":[

              ],
              "spaceLength":10,
              "stack":false,
              "steppedLine":false,
              "targets":[
                 {
                    "expr":"sum(rate(kong_http_requests_total{instance=~\"$instance\"}[1m]))",
                    "format":"time_series",
                    "intervalFactor":2,
                    "refId":"A",
                    "legendFormat":"Requests/second"
                 }
              ],
              "thresholds":[

              ],
              "timeFrom":null,
              "timeRegions":[

              ],
              "timeShift":null,
              "title":"Total requests per second (RPS)",
              "tooltip":{
                 "shared":true,
                 "sort":0,
                 "value_type":"individual"
              },
              "type":"timeseries",
              "xaxis":{
                 "buckets":null,
                 "mode":"time",
                 "name":null,
                 "show":true,
                 "values":[

                 ]
              },
              "yaxes":[
                 {
                    "format":"short",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 },
                 {
                    "format":"s",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 }
              ],
              "yaxis":{
                 "align":false,
                 "alignLevel":null
              }
           },
           {
              "aliasColors":{

              },
              "bars":false,
              "dashLength":10,
              "dashes":false,
              "datasource":"${DS_PROMETHEUS}",
              "fieldConfig":{
                 "defaults":{
                    "links":[

                    ],
                    "custom":{
                       "fillOpacity":10,
                       "showPoints":"never",
                       "spanNulls":true
                    },
                    "unit":"reqps"
                 },
                 "overrides":[

                 ]
              },
              "fill":1,
              "fillGradient":0,
              "gridPos":{
                 "h":7,
                 "w":24,
                 "x":0,
                 "y":8
              },
              "hiddenSeries":false,
              "id":16,
              "legend":{
                 "avg":false,
                 "current":false,
                 "max":false,
                 "min":false,
                 "show":true,
                 "total":false,
                 "values":false
              },
              "lines":true,
              "linewidth":1,
              "links":[

              ],
              "nullPointMode":"null",
              "options":{
                 "alertThreshold":true,
                 "legend":{
                    "calcs":[

                    ],
                    "placement":"bottom"
                 },
                 "tooltip":{
                    "mode":"multi",
                    "sort":"none"
                 }
              },
              "paceLength":10,
              "percentage":false,
              "pluginVersion":"8.4.5",
              "pointradius":5,
              "points":false,
              "renderer":"flot",
              "seriesOverrides":[

              ],
              "spaceLength":10,
              "stack":false,
              "steppedLine":false,
              "targets":[
                 {
                    "expr":"sum(rate(kong_http_requests_total{service=~\"$service\", route=~\"$route\", instance=~\"$instance\"}[1m])) by (service)",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"service:{{service}}",
                    "refId":"A"
                 },
                 {
                    "expr":"sum(rate(kong_http_requests_total{service=~\"$service\", route=~\"$route\", instance=~\"$instance\"}[1m])) by (route)",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"route:{{route}}",
                    "refId":"B"
                 }
              ],
              "thresholds":[

              ],
              "timeFrom":null,
              "timeRegions":[

              ],
              "timeShift":null,
              "title":"RPS per route/service ($service)",
              "tooltip":{
                 "shared":true,
                 "sort":0,
                 "value_type":"individual"
              },
              "type":"timeseries",
              "xaxis":{
                 "buckets":null,
                 "mode":"time",
                 "name":null,
                 "show":true,
                 "values":[

                 ]
              },
              "yaxes":[
                 {
                    "format":"short",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 },
                 {
                    "format":"short",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 }
              ],
              "yaxis":{
                 "align":false,
                 "alignLevel":null
              }
           },
           {
              "aliasColors":{

              },
              "bars":false,
              "dashLength":10,
              "dashes":false,
              "datasource":"${DS_PROMETHEUS}",
              "fieldConfig":{
                 "defaults":{
                    "links":[

                    ],
                    "custom":{
                       "fillOpacity":10,
                       "showPoints":"never",
                       "spanNulls":true
                    },
                    "unit":"reqps"
                 },
                 "overrides":[

                 ]
              },
              "fill":1,
              "fillGradient":0,
              "gridPos":{
                 "h":7,
                 "w":24,
                 "x":0,
                 "y":15
              },
              "hiddenSeries":false,
              "id":39,
              "legend":{
                 "avg":false,
                 "current":false,
                 "max":false,
                 "min":false,
                 "show":true,
                 "total":false,
                 "values":false
              },
              "lines":true,
              "linewidth":1,
              "links":[

              ],
              "nullPointMode":"null",
              "options":{
                 "alertThreshold":true,
                 "legend":{
                    "calcs":[

                    ],
                    "placement":"bottom"
                 },
                 "tooltip":{
                    "mode":"multi",
                    "sort":"none"
                 }
              },
              "paceLength":10,
              "percentage":false,
              "pluginVersion":"8.4.5",
              "pointradius":5,
              "points":false,
              "renderer":"flot",
              "seriesOverrides":[

              ],
              "spaceLength":10,
              "stack":false,
              "steppedLine":false,
              "targets":[
                 {
                    "expr":"sum(rate(kong_http_requests_total{service=~\"$service\", route=~\"$route\", instance=~\"$instance\"}[1m])) by (service,code)",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"service:{{service}}-{{code}}",
                    "refId":"A"
                 },
                 {
                    "expr":"sum(rate(kong_http_requests_total{service=~\"$service\", route=~\"$route\", instance=~\"$instance\"}[1m])) by (route,code)",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"route:{{route}}-{{code}}",
                    "refId":"B"
                 }
              ],
              "thresholds":[

              ],
              "timeFrom":null,
              "timeRegions":[

              ],
              "timeShift":null,
              "title":"RPS per route/service by status code",
              "tooltip":{
                 "shared":true,
                 "sort":0,
                 "value_type":"individual"
              },
              "type":"timeseries",
              "xaxis":{
                 "buckets":null,
                 "mode":"time",
                 "name":null,
                 "show":true,
                 "values":[

                 ]
              },
              "yaxes":[
                 {
                    "format":"short",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 },
                 {
                    "format":"short",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 }
              ],
              "yaxis":{
                 "align":false,
                 "alignLevel":null
              }
           }
        ],
        "title":"Request rate",
        "type":"row"
     },
     {
        "collapsed":true,
        "datasource":"${DS_PROMETHEUS}",
        "gridPos":{
           "h":1,
           "w":24,
           "x":0,
           "y":1
        },
        "id":36,
        "panels":[
           {
              "aliasColors":{

              },
              "bars":false,
              "dashLength":10,
              "dashes":false,
              "datasource":"${DS_PROMETHEUS}",
              "fieldConfig":{
                 "defaults":{
                    "links":[

                    ],
                    "custom":{
                       "fillOpacity":10,
                       "showPoints":"never",
                       "spanNulls":true
                    },
                    "unit":"ms"
                 },
                 "overrides":[

                 ]
              },
              "fill":1,
              "fillGradient":0,
              "gridPos":{
                 "h":7,
                 "w":8,
                 "x":0,
                 "y":2
              },
              "hiddenSeries":false,
              "id":10,
              "legend":{
                 "avg":false,
                 "current":false,
                 "max":false,
                 "min":false,
                 "show":true,
                 "total":false,
                 "values":false
              },
              "lines":true,
              "linewidth":1,
              "links":[

              ],
              "nullPointMode":"null",
              "options":{
                 "alertThreshold":true,
                 "tooltip":{
                    "mode":"multi",
                    "sort":"none"
                 }
              },
              "paceLength":10,
              "percentage":false,
              "pluginVersion":"8.4.5",
              "pointradius":5,
              "points":false,
              "renderer":"flot",
              "seriesOverrides":[

              ],
              "spaceLength":10,
              "stack":false,
              "steppedLine":false,
              "targets":[
                 {
                    "expr":"histogram_quantile(0.90, sum(rate(kong_kong_latency_ms_bucket{instance=~\"$instance\"}[1m])) by (le))",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"p90",
                    "refId":"A"
                 },
                 {
                    "expr":"histogram_quantile(0.95, sum(rate(kong_kong_latency_ms_bucket{instance=~\"$instance\"}[1m])) by (le))",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"p95",
                    "refId":"B"
                 },
                 {
                    "expr":"histogram_quantile(0.99, sum(rate(kong_kong_latency_ms_bucket{instance=~\"$instance\"}[1m])) by (le))",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"p99",
                    "refId":"C"
                 }
              ],
              "thresholds":[

              ],
              "timeFrom":null,
              "timeRegions":[

              ],
              "timeShift":null,
              "title":"Kong Proxy Latency across all services",
              "tooltip":{
                 "shared":true,
                 "sort":0,
                 "value_type":"individual"
              },
              "type":"timeseries",
              "xaxis":{
                 "buckets":null,
                 "mode":"time",
                 "name":null,
                 "show":true,
                 "values":[

                 ]
              },
              "yaxes":[
                 {
                    "format":"ms",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 },
                 {
                    "format":"short",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 }
              ],
              "yaxis":{
                 "align":false,
                 "alignLevel":null
              }
           },
           {
              "aliasColors":{

              },
              "bars":false,
              "dashLength":10,
              "dashes":false,
              "datasource":"${DS_PROMETHEUS}",
              "fieldConfig":{
                 "defaults":{
                    "links":[

                    ],
                    "custom":{
                       "fillOpacity":10,
                       "showPoints":"never",
                       "spanNulls":true
                    },
                    "unit":"ms"
                 },
                 "overrides":[

                 ]
              },
              "fill":1,
              "fillGradient":0,
              "gridPos":{
                 "h":7,
                 "w":8,
                 "x":8,
                 "y":2
              },
              "hiddenSeries":false,
              "id":11,
              "legend":{
                 "avg":false,
                 "current":false,
                 "max":false,
                 "min":false,
                 "show":true,
                 "total":false,
                 "values":false
              },
              "lines":true,
              "linewidth":1,
              "links":[

              ],
              "nullPointMode":"null",
              "options":{
                 "alertThreshold":true,
                 "tooltip":{
                    "mode":"multi",
                    "sort":"none"
                 }
              },
              "paceLength":10,
              "percentage":false,
              "pluginVersion":"8.4.5",
              "pointradius":5,
              "points":false,
              "renderer":"flot",
              "seriesOverrides":[

              ],
              "spaceLength":10,
              "stack":false,
              "steppedLine":false,
              "targets":[
                 {
                    "expr":"histogram_quantile(0.90, sum(rate(kong_kong_latency_ms_bucket{ service =~ \"$service\",route=~\"$route\",instance=~\"$instance\"}[1m])) by (service,le))",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"p90-{{service}}",
                    "refId":"A"
                 },
                 {
                    "expr":"histogram_quantile(0.95, sum(rate(kong_kong_latency_ms_bucket{ service =~ \"$service\",route=~\"$route\",instance=~\"$instance\"}[1m])) by (service,le))",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"p95-{{service}}",
                    "refId":"B"
                 },
                 {
                    "expr":"histogram_quantile(0.99, sum(rate(kong_kong_latency_ms_bucket{ service =~ \"$service\",route=~\"$route\",instance=~\"$instance\"}[1m])) by (service,le))",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"p99-{{service}}",
                    "refId":"C"
                 }
              ],
              "thresholds":[

              ],
              "timeFrom":null,
              "timeRegions":[

              ],
              "timeShift":null,
              "title":"Kong Proxy Latency per Service",
              "tooltip":{
                 "shared":true,
                 "sort":0,
                 "value_type":"individual"
              },
              "type":"timeseries",
              "xaxis":{
                 "buckets":null,
                 "mode":"time",
                 "name":null,
                 "show":true,
                 "values":[

                 ]
              },
              "yaxes":[
                 {
                    "format":"ms",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 },
                 {
                    "format":"short",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 }
              ],
              "yaxis":{
                 "align":false,
                 "alignLevel":null
              }
           },
           {
              "aliasColors":{

              },
              "bars":false,
              "dashLength":10,
              "dashes":false,
              "datasource":"${DS_PROMETHEUS}",
              "fieldConfig":{
                 "defaults":{
                    "links":[

                    ],
                    "custom":{
                       "fillOpacity":10,
                       "showPoints":"never",
                       "spanNulls":true
                    },
                    "unit":"ms"
                 },
                 "overrides":[

                 ]
              },
              "fill":1,
              "fillGradient":0,
              "gridPos":{
                 "h":7,
                 "w":8,
                 "x":16,
                 "y":2
              },
              "hiddenSeries":false,
              "id":42,
              "legend":{
                 "avg":false,
                 "current":false,
                 "max":false,
                 "min":false,
                 "show":true,
                 "total":false,
                 "values":false
              },
              "lines":true,
              "linewidth":1,
              "links":[

              ],
              "nullPointMode":"null",
              "options":{
                 "alertThreshold":true,
                 "tooltip":{
                    "mode":"multi",
                    "sort":"none"
                 }
              },
              "paceLength":10,
              "percentage":false,
              "pluginVersion":"8.4.5",
              "pointradius":5,
              "points":false,
              "renderer":"flot",
              "seriesOverrides":[

              ],
              "spaceLength":10,
              "stack":false,
              "steppedLine":false,
              "targets":[
                 {
                    "expr":"histogram_quantile(0.90, sum(rate(kong_kong_latency_ms_bucket{ service =~ \"$service\",route=~\"$route\",instance=~\"$instance\"}[1m])) by (route,le))",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"p90-{{route}}",
                    "refId":"A"
                 },
                 {
                    "expr":"histogram_quantile(0.95, sum(rate(kong_kong_latency_ms_bucket{ service =~ \"$service\",route=~\"$route\",instance=~\"$instance\"}[1m])) by (route,le))",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"p95-{{route}}",
                    "refId":"B"
                 },
                 {
                    "expr":"histogram_quantile(0.99, sum(rate(kong_kong_latency_ms_bucket{ service =~ \"$service\",route=~\"$route\",instance=~\"$instance\"}[1m])) by (route,le))",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"p99-{{route}}",
                    "refId":"C"
                 }
              ],
              "thresholds":[

              ],
              "timeFrom":null,
              "timeRegions":[

              ],
              "timeShift":null,
              "title":"Kong Proxy Latency per Route",
              "tooltip":{
                 "shared":true,
                 "sort":0,
                 "value_type":"individual"
              },
              "type":"timeseries",
              "xaxis":{
                 "buckets":null,
                 "mode":"time",
                 "name":null,
                 "show":true,
                 "values":[

                 ]
              },
              "yaxes":[
                 {
                    "format":"ms",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 },
                 {
                    "format":"short",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 }
              ],
              "yaxis":{
                 "align":false,
                 "alignLevel":null
              }
           },
           {
              "aliasColors":{

              },
              "bars":false,
              "dashLength":10,
              "dashes":false,
              "datasource":"${DS_PROMETHEUS}",
              "fieldConfig":{
                 "defaults":{
                    "links":[

                    ],
                    "custom":{
                       "fillOpacity":10,
                       "showPoints":"never",
                       "spanNulls":true
                    },
                    "unit":"ms"
                 },
                 "overrides":[

                 ]
              },
              "fill":1,
              "fillGradient":0,
              "gridPos":{
                 "h":7,
                 "w":8,
                 "x":0,
                 "y":9
              },
              "hiddenSeries":false,
              "id":12,
              "legend":{
                 "avg":false,
                 "current":false,
                 "max":false,
                 "min":false,
                 "show":true,
                 "total":false,
                 "values":false
              },
              "lines":true,
              "linewidth":1,
              "links":[

              ],
              "nullPointMode":"null",
              "options":{
                 "alertThreshold":true,
                 "tooltip":{
                    "mode":"multi",
                    "sort":"none"
                 }
              },
              "paceLength":10,
              "percentage":false,
              "pluginVersion":"8.4.5",
              "pointradius":5,
              "points":false,
              "renderer":"flot",
              "seriesOverrides":[

              ],
              "spaceLength":10,
              "stack":false,
              "steppedLine":false,
              "targets":[
                 {
                    "expr":"histogram_quantile(0.90, sum(rate(kong_request_latency_ms_bucket{}[1m])) by (le))",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"p90",
                    "refId":"A"
                 },
                 {
                    "expr":"histogram_quantile(0.95, sum(rate(kong_request_latency_ms_bucket{}[1m])) by (le))",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"p95",
                    "refId":"B"
                 },
                 {
                    "expr":"histogram_quantile(0.99, sum(rate(kong_request_latency_ms_bucket{}[1m])) by (le))",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"p99",
                    "refId":"C"
                 }
              ],
              "thresholds":[

              ],
              "timeFrom":null,
              "timeRegions":[

              ],
              "timeShift":null,
              "title":"Request Time across all services",
              "tooltip":{
                 "shared":true,
                 "sort":0,
                 "value_type":"individual"
              },
              "type":"timeseries",
              "xaxis":{
                 "buckets":null,
                 "mode":"time",
                 "name":null,
                 "show":true,
                 "values":[

                 ]
              },
              "yaxes":[
                 {
                    "format":"ms",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 },
                 {
                    "format":"short",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 }
              ],
              "yaxis":{
                 "align":false,
                 "alignLevel":null
              }
           },
           {
              "aliasColors":{

              },
              "bars":false,
              "dashLength":10,
              "dashes":false,
              "datasource":"${DS_PROMETHEUS}",
              "fieldConfig":{
                 "defaults":{
                    "links":[

                    ],
                    "custom":{
                       "fillOpacity":10,
                       "showPoints":"never",
                       "spanNulls":true
                    },
                    "unit":"ms"
                 },
                 "overrides":[

                 ]
              },
              "fill":1,
              "fillGradient":0,
              "gridPos":{
                 "h":7,
                 "w":8,
                 "x":8,
                 "y":9
              },
              "hiddenSeries":false,
              "id":13,
              "legend":{
                 "avg":false,
                 "current":false,
                 "max":false,
                 "min":false,
                 "show":true,
                 "total":false,
                 "values":false
              },
              "lines":true,
              "linewidth":1,
              "links":[

              ],
              "nullPointMode":"null",
              "options":{
                 "alertThreshold":true,
                 "tooltip":{
                    "mode":"multi",
                    "sort":"none"
                 }
              },
              "paceLength":10,
              "percentage":false,
              "pluginVersion":"8.4.5",
              "pointradius":5,
              "points":false,
              "renderer":"flot",
              "seriesOverrides":[

              ],
              "spaceLength":10,
              "stack":false,
              "steppedLine":false,
              "targets":[
                 {
                    "expr":"histogram_quantile(0.90, sum(rate(kong_request_latency_ms_bucket{service =~ \"$service\",route=~\"$route\",instance=~\"$instance\"}[1m])) by (service,le))",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"p90-{{service}}",
                    "refId":"A"
                 },
                 {
                    "expr":"histogram_quantile(0.95, sum(rate(kong_request_latency_ms_bucket{service =~ \"$service\",route=~\"$route\",instance=~\"$instance\"}[1m])) by (service,le))",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"p95-{{service}}",
                    "refId":"B"
                 },
                 {
                    "expr":"histogram_quantile(0.99, sum(rate(kong_request_latency_ms_bucket{service =~ \"$service\",route=~\"$route\",instance=~\"$instance\"}[1m])) by (service,le))",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"p99-{{service}}",
                    "refId":"C"
                 }
              ],
              "thresholds":[

              ],
              "timeFrom":null,
              "timeRegions":[

              ],
              "timeShift":null,
              "title":"Request Time per service",
              "tooltip":{
                 "shared":true,
                 "sort":0,
                 "value_type":"individual"
              },
              "type":"timeseries",
              "xaxis":{
                 "buckets":null,
                 "mode":"time",
                 "name":null,
                 "show":true,
                 "values":[

                 ]
              },
              "yaxes":[
                 {
                    "format":"ms",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 },
                 {
                    "format":"short",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 }
              ],
              "yaxis":{
                 "align":false,
                 "alignLevel":null
              }
           },
           {
              "aliasColors":{

              },
              "bars":false,
              "dashLength":10,
              "dashes":false,
              "datasource":"${DS_PROMETHEUS}",
              "fieldConfig":{
                 "defaults":{
                    "links":[

                    ],
                    "custom":{
                       "fillOpacity":10,
                       "showPoints":"never",
                       "spanNulls":true
                    },
                    "unit":"ms"
                 },
                 "overrides":[

                 ]
              },
              "fill":1,
              "fillGradient":0,
              "gridPos":{
                 "h":7,
                 "w":8,
                 "x":16,
                 "y":9
              },
              "hiddenSeries":false,
              "id":41,
              "legend":{
                 "avg":false,
                 "current":false,
                 "max":false,
                 "min":false,
                 "show":true,
                 "total":false,
                 "values":false
              },
              "lines":true,
              "linewidth":1,
              "links":[

              ],
              "nullPointMode":"null",
              "options":{
                 "alertThreshold":true,
                 "tooltip":{
                    "mode":"multi",
                    "sort":"none"
                 }
              },
              "paceLength":10,
              "percentage":false,
              "pluginVersion":"8.4.5",
              "pointradius":5,
              "points":false,
              "renderer":"flot",
              "seriesOverrides":[

              ],
              "spaceLength":10,
              "stack":false,
              "steppedLine":false,
              "targets":[
                 {
                    "expr":"histogram_quantile(0.90, sum(rate(kong_request_latency_ms_bucket{service =~ \"$service\",route=~\"$route\",instance=~\"$instance\"}[1m])) by (route,le))",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"p90-{{route}}",
                    "refId":"A"
                 },
                 {
                    "expr":"histogram_quantile(0.95, sum(rate(kong_request_latency_ms_bucket{service =~ \"$service\",route=~\"$route\",instance=~\"$instance\"}[1m])) by (route,le))",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"p95-{{route}}",
                    "refId":"B"
                 },
                 {
                    "expr":"histogram_quantile(0.99, sum(rate(kong_request_latency_ms_bucket{service =~ \"$service\",route=~\"$route\",instance=~\"$instance\"}[1m])) by (route,le))",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"p99-{{route}}",
                    "refId":"C"
                 }
              ],
              "thresholds":[

              ],
              "timeFrom":null,
              "timeRegions":[

              ],
              "timeShift":null,
              "title":"Request Time per Route",
              "tooltip":{
                 "shared":true,
                 "sort":0,
                 "value_type":"individual"
              },
              "type":"timeseries",
              "xaxis":{
                 "buckets":null,
                 "mode":"time",
                 "name":null,
                 "show":true,
                 "values":[

                 ]
              },
              "yaxes":[
                 {
                    "format":"ms",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 },
                 {
                    "format":"short",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 }
              ],
              "yaxis":{
                 "align":false,
                 "alignLevel":null
              }
           },
           {
              "aliasColors":{

              },
              "bars":false,
              "dashLength":10,
              "dashes":false,
              "datasource":"${DS_PROMETHEUS}",
              "fieldConfig":{
                 "defaults":{
                    "links":[

                    ],
                    "custom":{
                       "fillOpacity":10,
                       "showPoints":"never",
                       "spanNulls":true
                    },
                    "unit":"ms"
                 },
                 "overrides":[

                 ]
              },
              "fill":1,
              "fillGradient":0,
              "gridPos":{
                 "h":7,
                 "w":8,
                 "x":0,
                 "y":16
              },
              "height":"250",
              "hiddenSeries":false,
              "id":14,
              "legend":{
                 "avg":false,
                 "current":false,
                 "max":false,
                 "min":false,
                 "show":true,
                 "total":false,
                 "values":false
              },
              "lines":true,
              "linewidth":1,
              "links":[

              ],
              "nullPointMode":"null",
              "options":{
                 "alertThreshold":true,
                 "tooltip":{
                    "mode":"multi",
                    "sort":"none"
                 }
              },
              "paceLength":10,
              "percentage":false,
              "pluginVersion":"8.4.5",
              "pointradius":5,
              "points":false,
              "renderer":"flot",
              "seriesOverrides":[

              ],
              "spaceLength":10,
              "stack":false,
              "steppedLine":false,
              "targets":[
                 {
                    "expr":"histogram_quantile(0.90, sum(rate(kong_upstream_latency_ms_bucket{}[1m])) by (le))",
                    "format":"time_series",
                    "interval":"",
                    "intervalFactor":2,
                    "legendFormat":"p90",
                    "refId":"A"
                 },
                 {
                    "expr":"histogram_quantile(0.95, sum(rate(kong_upstream_latency_ms_bucket{}[1m])) by (le))",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"p95",
                    "refId":"B"
                 },
                 {
                    "expr":"histogram_quantile(0.99, sum(rate(kong_upstream_latency_ms_bucket{}[1m])) by (le))",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"p99",
                    "refId":"C"
                 }
              ],
              "thresholds":[

              ],
              "timeFrom":null,
              "timeRegions":[

              ],
              "timeShift":null,
              "title":"Upstream time across all services",
              "tooltip":{
                 "shared":true,
                 "sort":0,
                 "value_type":"individual"
              },
              "type":"timeseries",
              "xaxis":{
                 "buckets":null,
                 "mode":"time",
                 "name":null,
                 "show":true,
                 "values":[

                 ]
              },
              "yaxes":[
                 {
                    "format":"ms",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 },
                 {
                    "format":"short",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 }
              ],
              "yaxis":{
                 "align":false,
                 "alignLevel":null
              }
           },
           {
              "aliasColors":{

              },
              "bars":false,
              "dashLength":10,
              "dashes":false,
              "datasource":"${DS_PROMETHEUS}",
              "fieldConfig":{
                 "defaults":{
                    "links":[

                    ],
                    "custom":{
                       "fillOpacity":10,
                       "showPoints":"never",
                       "spanNulls":true
                    },
                    "unit":"ms"
                 },
                 "overrides":[

                 ]
              },
              "fill":1,
              "fillGradient":0,
              "gridPos":{
                 "h":7,
                 "w":8,
                 "x":8,
                 "y":16
              },
              "height":"250",
              "hiddenSeries":false,
              "id":15,
              "legend":{
                 "avg":false,
                 "current":false,
                 "max":false,
                 "min":false,
                 "show":true,
                 "total":false,
                 "values":false
              },
              "lines":true,
              "linewidth":1,
              "links":[

              ],
              "nullPointMode":"null",
              "options":{
                 "alertThreshold":true,
                 "tooltip":{
                    "mode":"multi",
                    "sort":"none"
                 }
              },
              "paceLength":10,
              "percentage":false,
              "pluginVersion":"8.4.5",
              "pointradius":5,
              "points":false,
              "renderer":"flot",
              "seriesOverrides":[

              ],
              "spaceLength":10,
              "stack":false,
              "steppedLine":false,
              "targets":[
                 {
                    "expr":"histogram_quantile(0.90, sum(rate(kong_upstream_latency_ms_bucket{service =~ \"$service\",route=~\"$route\",instance=~\"$instance\"}[1m])) by (service,le))",
                    "format":"time_series",
                    "interval":"",
                    "intervalFactor":2,
                    "legendFormat":"p90-{{service}}",
                    "refId":"A"
                 },
                 {
                    "expr":"histogram_quantile(0.95, sum(rate(kong_upstream_latency_ms_bucket{service =~ \"$service\",route=~\"$route\",instance=~\"$instance\"}[1m])) by (service,le))",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"p95-{{service}}",
                    "refId":"B"
                 },
                 {
                    "expr":"histogram_quantile(0.99, sum(rate(kong_upstream_latency_ms_bucket{service =~ \"$service\",route=~\"$route\",instance=~\"$instance\"}[1m])) by (service,le))",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"p99-{{service}}",
                    "refId":"C"
                 }
              ],
              "thresholds":[

              ],
              "timeFrom":null,
              "timeRegions":[

              ],
              "timeShift":null,
              "title":"Upstream Time across per service",
              "tooltip":{
                 "shared":true,
                 "sort":0,
                 "value_type":"individual"
              },
              "type":"timeseries",
              "xaxis":{
                 "buckets":null,
                 "mode":"time",
                 "name":null,
                 "show":true,
                 "values":[

                 ]
              },
              "yaxes":[
                 {
                    "format":"ms",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 },
                 {
                    "format":"short",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 }
              ],
              "yaxis":{
                 "align":false,
                 "alignLevel":null
              }
           },
           {
              "aliasColors":{

              },
              "bars":false,
              "dashLength":10,
              "dashes":false,
              "datasource":"${DS_PROMETHEUS}",
              "fieldConfig":{
                 "defaults":{
                    "links":[

                    ],
                    "custom":{
                       "fillOpacity":10,
                       "showPoints":"never",
                       "spanNulls":true
                    },
                    "unit":"ms"
                 },
                 "overrides":[

                 ]
              },
              "fill":1,
              "fillGradient":0,
              "gridPos":{
                 "h":7,
                 "w":8,
                 "x":16,
                 "y":16
              },
              "height":"250",
              "hiddenSeries":false,
              "id":40,
              "legend":{
                 "avg":false,
                 "current":false,
                 "max":false,
                 "min":false,
                 "show":true,
                 "total":false,
                 "values":false
              },
              "lines":true,
              "linewidth":1,
              "links":[

              ],
              "nullPointMode":"null",
              "options":{
                 "alertThreshold":true,
                 "tooltip":{
                    "mode":"multi",
                    "sort":"none"
                 }
              },
              "paceLength":10,
              "percentage":false,
              "pluginVersion":"8.4.5",
              "pointradius":5,
              "points":false,
              "renderer":"flot",
              "seriesOverrides":[

              ],
              "spaceLength":10,
              "stack":false,
              "steppedLine":false,
              "targets":[
                 {
                    "expr":"histogram_quantile(0.90, sum(rate(kong_upstream_latency_ms_bucket{service =~ \"$service\",route=~\"$route\",instance=~\"$instance\"}[1m])) by (route,le))",
                    "format":"time_series",
                    "interval":"",
                    "intervalFactor":2,
                    "legendFormat":"p90-{{route}}",
                    "refId":"A"
                 },
                 {
                    "expr":"histogram_quantile(0.95, sum(rate(kong_upstream_latency_ms_bucket{service =~ \"$service\",route=~\"$route\",instance=~\"$instance\"}[1m])) by (route,le))",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"p95-{{route}}",
                    "refId":"B"
                 },
                 {
                    "expr":"histogram_quantile(0.99, sum(rate(kong_upstream_latency_ms_bucket{service =~ \"$service\",route=~\"$route\",instance=~\"$instance\"}[1m])) by (route,le))",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"p99-{{route}}",
                    "refId":"C"
                 }
              ],
              "thresholds":[

              ],
              "timeFrom":null,
              "timeRegions":[

              ],
              "timeShift":null,
              "title":"Upstream Time across per Route",
              "tooltip":{
                 "shared":true,
                 "sort":0,
                 "value_type":"individual"
              },
              "type":"timeseries",
              "xaxis":{
                 "buckets":null,
                 "mode":"time",
                 "name":null,
                 "show":true,
                 "values":[

                 ]
              },
              "yaxes":[
                 {
                    "format":"ms",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 },
                 {
                    "format":"short",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 }
              ],
              "yaxis":{
                 "align":false,
                 "alignLevel":null
              }
           }
        ],
        "title":"Latencies",
        "type":"row"
     },
     {
        "collapsed":true,
        "datasource":"${DS_PROMETHEUS}",
        "gridPos":{
           "h":1,
           "w":24,
           "x":0,
           "y":2
        },
        "id":34,
        "panels":[
           {
              "aliasColors":{

              },
              "bars":false,
              "dashLength":10,
              "dashes":false,
              "datasource":"${DS_PROMETHEUS}",
              "fieldConfig":{
                 "defaults":{
                    "links":[

                    ],
                    "custom":{
                       "fillOpacity":10,
                       "showPoints":"never",
                       "spanNulls":true
                    },
                    "unit":"Bps"
                 },
                 "overrides":[

                 ]
              },
              "fill":1,
              "fillGradient":0,
              "gridPos":{
                 "h":7,
                 "w":24,
                 "x":0,
                 "y":3
              },
              "hiddenSeries":false,
              "id":3,
              "legend":{
                 "alignAsTable":true,
                 "avg":true,
                 "current":true,
                 "max":true,
                 "min":true,
                 "rightSide":true,
                 "show":true,
                 "total":false,
                 "values":true
              },
              "lines":true,
              "linewidth":1,
              "links":[

              ],
              "nullPointMode":"null",
              "options":{
                 "alertThreshold":true,
                 "legend":{
                    "calcs":[
                       "min",
                       "max",
                       "mean",
                       "lastNotNull"
                    ],
                    "displayMode":"table",
                    "placement":"right"
                 }
              },
              "paceLength":10,
              "percentage":false,
              "pluginVersion":"8.4.5",
              "pointradius":5,
              "points":false,
              "renderer":"flot",
              "seriesOverrides":[

              ],
              "spaceLength":10,
              "stack":false,
              "steppedLine":false,
              "targets":[
                 {
                    "expr":"sum(irate(kong_bandwidth_bytes{instance=~\"$instance\"}[1m])) by (type)",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"{{type}}",
                    "refId":"A"
                 }
              ],
              "thresholds":[

              ],
              "timeFrom":null,
              "timeRegions":[

              ],
              "timeShift":null,
              "title":"Total Bandwidth",
              "tooltip":{
                 "shared":true,
                 "sort":0,
                 "value_type":"individual"
              },
              "type":"timeseries",
              "xaxis":{
                 "buckets":null,
                 "mode":"time",
                 "name":null,
                 "show":true,
                 "values":[

                 ]
              },
              "yaxes":[
                 {
                    "format":"Bps",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 },
                 {
                    "format":"short",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":false
                 }
              ],
              "yaxis":{
                 "align":false,
                 "alignLevel":null
              }
           },
           {
              "aliasColors":{

              },
              "bars":false,
              "dashLength":10,
              "dashes":false,
              "datasource":"${DS_PROMETHEUS}",
              "fieldConfig":{
                 "defaults":{
                    "links":[

                    ],
                    "custom":{
                       "fillOpacity":10,
                       "showPoints":"never",
                       "spanNulls":true
                    },
                    "unit":"Bps"
                 },
                 "overrides":[

                 ]
              },
              "fill":1,
              "fillGradient":0,
              "gridPos":{
                 "h":7,
                 "w":12,
                 "x":0,
                 "y":10
              },
              "hiddenSeries":false,
              "id":2,
              "legend":{
                 "avg":false,
                 "current":false,
                 "max":false,
                 "min":false,
                 "show":true,
                 "total":false,
                 "values":false
              },
              "lines":true,
              "linewidth":1,
              "links":[

              ],
              "nullPointMode":"null",
              "options":{
                 "alertThreshold":true,
                 "tooltip":{
                    "mode":"multi",
                    "sort":"none"
                 }
              },
              "paceLength":10,
              "percentage":false,
              "pluginVersion":"8.4.5",
              "pointradius":5,
              "points":false,
              "renderer":"flot",
              "seriesOverrides":[

              ],
              "spaceLength":10,
              "stack":false,
              "steppedLine":false,
              "targets":[
                 {
                    "expr":"sum(irate(kong_bandwidth_bytes{direction=\"egress\", service =~\"$service\",route=~\"$route\",instance=~\"$instance\"}[1m])) by (service)",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"service:{{service}}",
                    "refId":"A"
                 },
                 {
                    "expr":"sum(irate(kong_bandwidth_bytes{direction=\"egress\", service =~\"$service\",route=~\"$route\",instance=~\"$instance\"}[1m])) by (route)",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"route:{{route}}",
                    "refId":"B"
                 }
              ],
              "thresholds":[

              ],
              "timeFrom":null,
              "timeRegions":[

              ],
              "timeShift":null,
              "title":"Egress per service/route",
              "tooltip":{
                 "shared":true,
                 "sort":0,
                 "value_type":"individual"
              },
              "type":"timeseries",
              "xaxis":{
                 "buckets":null,
                 "mode":"time",
                 "name":null,
                 "show":true,
                 "values":[

                 ]
              },
              "yaxes":[
                 {
                    "format":"Bps",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 },
                 {
                    "format":"short",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 }
              ],
              "yaxis":{
                 "align":false,
                 "alignLevel":null
              }
           },
           {
              "aliasColors":{

              },
              "bars":false,
              "dashLength":10,
              "dashes":false,
              "datasource":"${DS_PROMETHEUS}",
              "fieldConfig":{
                 "defaults":{
                    "links":[

                    ],
                    "custom":{
                       "fillOpacity":10,
                       "showPoints":"never",
                       "spanNulls":true
                    },
                    "unit":"Bps"
                 },
                 "overrides":[

                 ]
              },
              "fill":1,
              "fillGradient":0,
              "gridPos":{
                 "h":7,
                 "w":12,
                 "x":12,
                 "y":10
              },
              "hiddenSeries":false,
              "id":9,
              "legend":{
                 "avg":false,
                 "current":false,
                 "max":false,
                 "min":false,
                 "show":true,
                 "total":false,
                 "values":false
              },
              "lines":true,
              "linewidth":1,
              "links":[

              ],
              "nullPointMode":"null",
              "options":{
                 "alertThreshold":true
              },
              "paceLength":10,
              "percentage":false,
              "pluginVersion":"8.4.5",
              "pointradius":5,
              "points":false,
              "renderer":"flot",
              "seriesOverrides":[

              ],
              "spaceLength":10,
              "stack":false,
              "steppedLine":false,
              "targets":[
                 {
                    "expr":"sum(irate(kong_bandwidth_bytes{direction=\"ingress\", service =~\"$service\"}[1m])) by (service)",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"{{service}}",
                    "refId":"A"
                 }
              ],
              "thresholds":[

              ],
              "timeFrom":null,
              "timeRegions":[

              ],
              "timeShift":null,
              "title":"Ingress per service/route",
              "tooltip":{
                 "shared":true,
                 "sort":0,
                 "value_type":"individual"
              },
              "type":"timeseries",
              "xaxis":{
                 "buckets":null,
                 "mode":"time",
                 "name":null,
                 "show":true,
                 "values":[

                 ]
              },
              "yaxes":[
                 {
                    "format":"Bps",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 },
                 {
                    "format":"short",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 }
              ],
              "yaxis":{
                 "align":false,
                 "alignLevel":null
              }
           }
        ],
        "title":"Bandwidth",
        "type":"row"
     },
     {
        "collapsed":true,
        "datasource":"${DS_PROMETHEUS}",
        "gridPos":{
           "h":1,
           "w":24,
           "x":0,
           "y":3
        },
        "id":28,
        "panels":[
           {
              "datasource":"${DS_PROMETHEUS}",
              "fieldConfig":{
                 "defaults":{
                    "color":{
                       "mode":"thresholds"
                    },
                    "custom":{
                       "fillOpacity":10,
                       "showPoints":"never",
                       "spanNulls":true
                    },
                    "mappings":[
                       {
                          "from":"",
                          "id":1,
                          "operator":"",
                          "text":"",
                          "to":"",
                          "type":1,
                          "value":""
                       }
                    ],
                    "max":100,
                    "min":0,
                    "thresholds":{
                       "mode":"absolute",
                       "steps":[
                          {
                             "color":"green",
                             "value":null
                          },
                          {
                             "color":"yellow",
                             "value":70
                          },
                          {
                             "color":"red",
                             "value":90
                          }
                       ]
                    },
                    "unit":"percent"
                 },
                 "overrides":[

                 ]
              },
              "gridPos":{
                 "h":6,
                 "w":24,
                 "x":0,
                 "y":4
              },
              "id":22,
              "options":{
                 "fieldOptions":{
                    "calcs":[
                       "mean"
                    ],
                    "defaults":{
                       "mappings":[

                       ],
                       "thresholds":{
                          "mode":"absolute",
                          "steps":[
                             {
                                "color":"green",
                                "value":null
                             },
                             {
                                "color":"red",
                                "value":80
                             }
                          ]
                       },
                       "unit":"percent"
                    },
                    "overrides":[

                    ],
                    "values":false
                 },
                 "orientation":"auto",
                 "reduceOptions":{
                    "calcs":[
                       "lastNotNull"
                    ],
                    "fields":"",
                    "values":false
                 },
                 "showThresholdLabels":false,
                 "showThresholdMarkers":true,
                 "text":{

                 }
              },
              "pluginVersion":"8.4.5",
              "repeat":"instance",
              "repeatDirection":"v",
              "targets":[
                 {
                    "exemplar":true,
                    "expr":"(kong_memory_lua_shared_dict_bytes{instance=~\"$instance\"}/kong_memory_lua_shared_dict_total_bytes{instance=~\"$instance\"})*100",
                    "format":"time_series",
                    "instant":false,
                    "interval":"",
                    "legendFormat":"{{shared_dict}} ({{kong_subsystem}})",
                    "refId":"A"
                 }
              ],
              "timeFrom":null,
              "timeShift":null,
              "title":"Kong shared memory usage by Node ($instance)",
              "type":"gauge",
              "xaxis":{
                 "mode":"time",
                 "show":true,
                 "values":[

                 ]
              },
              "yaxes":[
                 {
                    "format":"bytes",
                    "logBase":1,
                    "show":true
                 },
                 {
                    "format":"bytes",
                    "logBase":1,
                    "show":true
                 }
              ],
              "yaxis":{
                 "align":false
              }
           },
           {
              "aliasColors":{

              },
              "bars":false,
              "dashLength":10,
              "dashes":false,
              "datasource":"${DS_PROMETHEUS}",
              "fieldConfig":{
                 "defaults":{
                    "color":{
                       "mode":"palette-classic"
                    },
                    "custom":{
                       "fillOpacity":10,
                       "showPoints":"never",
                       "spanNulls":true
                    },
                    "mappings":[

                    ],
                    "unit":"bytes"
                 },
                 "overrides":[

                 ]
              },
              "fill":1,
              "fillGradient":0,
              "gridPos":{
                 "h":6,
                 "w":24,
                 "x":0,
                 "y":10
              },
              "hiddenSeries":false,
              "id":43,
              "legend":{
                 "avg":false,
                 "current":false,
                 "max":false,
                 "min":false,
                 "show":true,
                 "total":false,
                 "values":false
              },
              "lines":true,
              "linewidth":1,
              "nullPointMode":"null",
              "options":{
                 "dataLinks":[

                 ],
                 "tooltip":{
                    "mode":"multi",
                    "sort":"none"
                 }
              },
              "percentage":false,
              "pluginVersion":"8.4.5",
              "pointradius":2,
              "points":false,
              "renderer":"flot",
              "repeat":"instance",
              "repeatDirection":"v",
              "seriesOverrides":[

              ],
              "spaceLength":10,
              "stack":false,
              "steppedLine":false,
              "targets":[
                 {
                    "exemplar":true,
                    "expr":"kong_memory_workers_lua_vms_bytes{instance=~\"$instance\"}",
                    "format":"time_series",
                    "instant":false,
                    "interval":"",
                    "legendFormat":"PID:{{pid}} ({{kong_subsystem}})",
                    "refId":"A"
                 }
              ],
              "thresholds":[

              ],
              "timeFrom":null,
              "timeRegions":[

              ],
              "timeShift":null,
              "title":"Kong worker Lua VM usage by Node ($instance)",
              "tooltip":{
                 "shared":true,
                 "sort":0,
                 "value_type":"individual"
              },
              "type":"timeseries",
              "xaxis":{
                 "mode":"time",
                 "show":true,
                 "values":[

                 ]
              },
              "yaxes":[
                 {
                    "format":"bytes",
                    "logBase":1,
                    "show":true
                 },
                 {
                    "format":"bytes",
                    "logBase":1,
                    "show":true
                 }
              ],
              "yaxis":{
                 "align":false,
                 "alignLevel":null
              }
           }
        ],
        "title":"Caching",
        "type":"row"
     },
     {
        "collapsed":true,
        "datasource":"${DS_PROMETHEUS}",
        "gridPos":{
           "h":1,
           "w":24,
           "x":0,
           "y":16
        },
        "id":45,
        "panels":[
           {
              "cards":{
                 "cardPadding":null,
                 "cardRound":null
              },
              "color":{
                 "cardColor":"#b4ff00",
                 "colorScale":"sqrt",
                 "colorScheme":"interpolateRdYlGn",
                 "exponent":0.5,
                 "mode":"spectrum"
              },
              "dataFormat":"tsbuckets",
              "datasource":"${DS_PROMETHEUS}",
              "fieldConfig":{
                 "defaults":{

                 },
                 "overrides":[

                 ]
              },
              "gridPos":{
                 "h":8,
                 "w":12,
                 "x":0,
                 "y":17
              },
              "heatmap":{

              },
              "hideZeroBuckets":false,
              "highlightCards":true,
              "id":49,
              "legend":{
                 "show":false
              },
              "pluginVersion":"7.5.4",
              "reverseYBuckets":false,
              "targets":[
                 {
                    "exemplar":true,
                    "expr":"sum(kong_upstream_target_health{state=\"healthy\",upstream=~\"$upstream\"}) by (upstream,target,address) * -1  + sum(kong_upstream_target_health{state=~\"(unhealthy|dns_error)\",upstream=~\"$upstream\"}) by (upstream,target,address)",
                    "format":"heatmap",
                    "hide":false,
                    "instant":false,
                    "interval":"",
                    "legendFormat":"{{upstream}}:{{target}}",
                    "refId":"A"
                 }
              ],
              "title":"Healthy status",
              "tooltip":{
                 "show":true,
                 "showHistogram":false
              },
              "transformations":[
                 {
                    "id":"seriesToColumns",
                    "options":{

                    }
                 }
              ],
              "type":"heatmap",
              "xAxis":{
                 "show":true
              },
              "xBucketNumber":null,
              "xBucketSize":null,
              "yAxis":{
                 "decimals":null,
                 "format":"short",
                 "logBase":1,
                 "max":null,
                 "min":null,
                 "show":true,
                 "splitFactor":null
              },
              "yBucketBound":"auto",
              "yBucketNumber":null,
              "yBucketSize":null
           },
           {
              "columns":[

              ],
              "datasource":"${DS_PROMETHEUS}",
              "fieldConfig":{
                 "defaults":{
                    "color":{
                       "mode":"fixed"
                    },
                    "custom":{
                       "displayMode":"auto",
                       "filterable":false
                    },
                    "mappings":[

                    ],
                    "thresholds":{
                       "mode":"absolute",
                       "steps":[
                          {
                             "color":"red",
                             "value":null
                          }
                       ]
                    },
                    "unit":"short"
                 },
                 "overrides":[
                    {
                       "matcher":{
                          "id":"byName",
                          "options":"state"
                       },
                       "properties":[
                          {
                             "id":"custom.displayMode",
                             "value":"color-background"
                          },
                          {
                             "id":"color",
                             "value":{
                                "mode":"thresholds"
                             }
                          },
                          {
                             "id":"thresholds",
                             "value":{
                                "mode":"absolute",
                                "steps":[
                                   {
                                      "color":"red",
                                      "value":null
                                   },
                                   {
                                      "color":"yellow",
                                      "value":0
                                   },
                                   {
                                      "color":"green",
                                      "value":1
                                   }
                                ]
                             }
                          },
                          {
                             "id":"mappings",
                             "value":[
                                {
                                   "from":"",
                                   "id":1,
                                   "text":"healthchecks_off",
                                   "to":"",
                                   "type":1,
                                   "value":"0"
                                },
                                {
                                   "from":"",
                                   "id":2,
                                   "text":"healthy",
                                   "to":"",
                                   "type":1,
                                   "value":"1"
                                },
                                {
                                   "from":"",
                                   "id":3,
                                   "text":"unhealthy",
                                   "to":"",
                                   "type":1,
                                   "value":"-1"
                                }
                             ]
                          }
                       ]
                    }
                 ]
              },
              "fontSize":"100%",
              "gridPos":{
                 "h":8,
                 "w":12,
                 "x":12,
                 "y":17
              },
              "id":47,
              "options":{
                 "frameIndex":0,
                 "showHeader":true
              },
              "pageSize":null,
              "pluginVersion":"7.5.4",
              "showHeader":true,
              "sort":{
                 "col":0,
                 "desc":true
              },
              "styles":[
                 {
                    "alias":"",
                    "align":"auto",
                    "colorMode":null,
                    "colors":[
                       "rgba(245, 54, 54, 0.9)",
                       "rgba(237, 129, 40, 0.89)",
                       "rgba(50, 172, 45, 0.97)"
                    ],
                    "dateFormat":"YYYY-MM-DD HH:mm:ss",
                    "decimals":2,
                    "mappingType":1,
                    "pattern":"Time",
                    "thresholds":[

                    ],
                    "type":"hidden",
                    "unit":"short"
                 },
                 {
                    "alias":"",
                    "align":"auto",
                    "colorMode":null,
                    "colors":[
                       "rgba(245, 54, 54, 0.9)",
                       "rgba(237, 129, 40, 0.89)",
                       "rgba(50, 172, 45, 0.97)"
                    ],
                    "dateFormat":"YYYY-MM-DD HH:mm:ss",
                    "decimals":2,
                    "mappingType":1,
                    "pattern":"state",
                    "thresholds":[

                    ],
                    "type":"hidden",
                    "unit":"short"
                 },
                 {
                    "alias":"state",
                    "align":"auto",
                    "colorMode":"cell",
                    "colors":[
                       "rgba(245, 54, 54, 0.9)",
                       "#FADE2A",
                       "rgba(50, 172, 45, 0.97)"
                    ],
                    "dateFormat":"YYYY-MM-DD HH:mm:ss",
                    "decimals":2,
                    "mappingType":1,
                    "pattern":"state_value",
                    "thresholds":[
                       "0",
                       "1"
                    ],
                    "type":"string",
                    "unit":"short",
                    "valueMaps":[
                       {
                          "text":"healthy",
                          "value":"1"
                       },
                       {
                          "text":"healthchecks_off",
                          "value":"0"
                       },
                       {
                          "text":"unhealthy",
                          "value":"-1"
                       }
                    ]
                 },
                 {
                    "alias":"",
                    "align":"auto",
                    "colorMode":null,
                    "colors":[
                       "rgba(245, 54, 54, 0.9)",
                       "rgba(237, 129, 40, 0.89)",
                       "rgba(50, 172, 45, 0.97)"
                    ],
                    "dateFormat":"YYYY-MM-DD HH:mm:ss",
                    "decimals":2,
                    "mappingType":1,
                    "pattern":"Value",
                    "thresholds":[

                    ],
                    "type":"hidden",
                    "unit":"short"
                 }
              ],
              "targets":[
                 {
                    "exemplar":false,
                    "expr":"sum(\n# map state to a numeric value\n# since grafana doesn't support value mapping yet\n  label_replace(\n    label_replace(\n      label_replace(\n       kong_upstream_target_health{upstream=~\"$upstream\"}\n       # healthy is positive number\n       , \"state_value\", \"1\", \"state\", \"healthy\"\n       # healthchecks_off is 0\n      ), \"state_value\", \"0\", \"state\", \"healthchecks_off\"\n      # unhealthy is negative number\n    ), \"state_value\", \"-1\", \"state\", \"(dns_error|unhealthy)\"\n  )\n)\nby (upstream, target, address, state, state_value) > 0",
                    "format":"table",
                    "instant":true,
                    "interval":"",
                    "legendFormat":"",
                    "refId":"A"
                 }
              ],
              "timeFrom":null,
              "timeShift":null,
              "transform":"table",
              "transformations":[
                 {
                    "id":"organize",
                    "options":{
                       "excludeByName":{
                          "Time":true,
                          "Value":true,
                          "state":true
                       },
                       "indexByName":{
                          "Time":0,
                          "Value":5,
                          "address":3,
                          "state":4,
                          "target":2,
                          "upstream":1
                       },
                       "renameByName":{
                          "Value":"report node count",
                          "state":"state_original",
                          "state_value":"state"
                       }
                    }
                 }
              ],
              "type":"table"
           }
        ],
        "title":"Upstream",
        "type":"row"
     },
     {
        "collapsed":true,
        "datasource":"${DS_PROMETHEUS}",
        "gridPos":{
           "h":1,
           "w":24,
           "x":0,
           "y":25
        },
        "id":25,
        "panels":[
           {
              "aliasColors":{

              },
              "bars":false,
              "dashLength":10,
              "dashes":false,
              "datasource":"${DS_PROMETHEUS}",
              "fieldConfig":{
                 "defaults":{
                    "links":[

                    ],
                    "custom":{
                       "fillOpacity":10,
                       "showPoints":"never",
                       "spanNulls":true
                    },
                    "unit":"reqps"
                 },
                 "overrides":[

                 ]
              },
              "fill":1,
              "fillGradient":0,
              "gridPos":{
                 "h":7,
                 "w":24,
                 "x":0,
                 "y":6
              },
              "hiddenSeries":false,
              "id":17,
              "legend":{
                 "avg":false,
                 "current":false,
                 "max":false,
                 "min":false,
                 "show":true,
                 "total":false,
                 "values":false
              },
              "lines":true,
              "linewidth":1,
              "links":[

              ],
              "nullPointMode":"null",
              "options":{
                 "alertThreshold":true,
                 "tooltip":{
                    "mode":"multi",
                    "sort":"none"
                 }
              },
              "paceLength":10,
              "percentage":false,
              "pluginVersion":"8.4.5",
              "pointradius":5,
              "points":false,
              "renderer":"flot",
              "seriesOverrides":[

              ],
              "spaceLength":10,
              "stack":false,
              "steppedLine":false,
              "targets":[
                 {
                    "expr":"sum(kong_nginx_connections_total{state=~\"active|reading|writing|waiting\", instance=~\"$instance\"}) by (state)",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"{{state}}",
                    "refId":"A"
                 }
              ],
              "thresholds":[

              ],
              "timeFrom":null,
              "timeRegions":[

              ],
              "timeShift":null,
              "title":"Nginx connection state",
              "tooltip":{
                 "shared":true,
                 "sort":0,
                 "value_type":"individual"
              },
              "type":"timeseries",
              "xaxis":{
                 "buckets":null,
                 "mode":"time",
                 "name":null,
                 "show":true,
                 "values":[

                 ]
              },
              "yaxes":[
                 {
                    "format":"short",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 },
                 {
                    "format":"short",
                    "label":null,
                    "logBase":1,
                    "max":null,
                    "min":null,
                    "show":true
                 }
              ],
              "yaxis":{
                 "align":false,
                 "alignLevel":null
              }
           },
           {
              "cacheTimeout":null,
              "colorBackground":false,
              "colorValue":false,
              "colors":[
                 "#299c46",
                 "rgba(237, 129, 40, 0.89)",
                 "#d44a3a"
              ],
              "datasource":"${DS_PROMETHEUS}",
              "fieldConfig":{
                 "defaults":{

                 },
                 "overrides":[

                 ]
              },
              "format":"none",
              "gauge":{
                 "maxValue":100,
                 "minValue":0,
                 "show":false,
                 "thresholdLabels":false,
                 "thresholdMarkers":true
              },
              "gridPos":{
                 "h":7,
                 "w":8,
                 "x":0,
                 "y":13
              },
              "id":18,
              "interval":null,
              "links":[

              ],
              "mappingType":1,
              "mappingTypes":[
                 {
                    "name":"value to text",
                    "value":1
                 },
                 {
                    "name":"range to text",
                    "value":2
                 }
              ],
              "maxDataPoints":100,
              "nullPointMode":"connected",
              "nullText":null,
              "postfix":"",
              "postfixFontSize":"50%",
              "prefix":"",
              "prefixFontSize":"50%",
              "rangeMaps":[
                 {
                    "from":"null",
                    "text":"N/A",
                    "to":"null"
                 }
              ],
              "sparkline":{
                 "fillColor":"#3f6833",
                 "full":true,
                 "lineColor":"rgb(31, 120, 193)",
                 "show":true
              },
              "tableColumn":"",
              "targets":[
                 {
                    "exemplar":true,
                    "expr":"sum(kong_nginx_connections_total{state=\"total\", instance=~\"$instance\"})",
                    "format":"time_series",
                    "interval":"",
                    "intervalFactor":2,
                    "legendFormat":"Total",
                    "refId":"A"
                 }
              ],
              "thresholds":"",
              "title":"Total Connections",
              "type":"singlestat",
              "valueFontSize":"80%",
              "valueMaps":[
                 {
                    "op":"=",
                    "text":"N/A",
                    "value":"null"
                 }
              ],
              "valueName":"current"
           },
           {
              "cacheTimeout":null,
              "colorBackground":false,
              "colorValue":false,
              "colors":[
                 "#299c46",
                 "rgba(237, 129, 40, 0.89)",
                 "#d44a3a"
              ],
              "datasource":"${DS_PROMETHEUS}",
              "fieldConfig":{
                 "defaults":{

                 },
                 "overrides":[

                 ]
              },
              "format":"none",
              "gauge":{
                 "maxValue":100,
                 "minValue":0,
                 "show":false,
                 "thresholdLabels":false,
                 "thresholdMarkers":true
              },
              "gridPos":{
                 "h":7,
                 "w":8,
                 "x":8,
                 "y":13
              },
              "id":19,
              "interval":null,
              "links":[

              ],
              "mappingType":1,
              "mappingTypes":[
                 {
                    "name":"value to text",
                    "value":1
                 },
                 {
                    "name":"range to text",
                    "value":2
                 }
              ],
              "maxDataPoints":100,
              "nullPointMode":"connected",
              "nullText":null,
              "postfix":"",
              "postfixFontSize":"50%",
              "prefix":"",
              "prefixFontSize":"50%",
              "rangeMaps":[
                 {
                    "from":"null",
                    "text":"N/A",
                    "to":"null"
                 }
              ],
              "sparkline":{
                 "fillColor":"#3f6833",
                 "full":true,
                 "lineColor":"rgb(31, 120, 193)",
                 "show":true
              },
              "tableColumn":"",
              "targets":[
                 {
                    "expr":"sum(kong_nginx_connections_total{state=\"handled\", instance=~\"$instance\"})",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"Handled",
                    "refId":"A"
                 }
              ],
              "thresholds":"",
              "title":"Handled Connections",
              "type":"singlestat",
              "valueFontSize":"80%",
              "valueMaps":[
                 {
                    "op":"=",
                    "text":"N/A",
                    "value":"null"
                 }
              ],
              "valueName":"current"
           },
           {
              "cacheTimeout":null,
              "colorBackground":false,
              "colorValue":false,
              "colors":[
                 "#299c46",
                 "rgba(237, 129, 40, 0.89)",
                 "#d44a3a"
              ],
              "datasource":"${DS_PROMETHEUS}",
              "fieldConfig":{
                 "defaults":{

                 },
                 "overrides":[

                 ]
              },
              "format":"none",
              "gauge":{
                 "maxValue":100,
                 "minValue":0,
                 "show":false,
                 "thresholdLabels":false,
                 "thresholdMarkers":true
              },
              "gridPos":{
                 "h":7,
                 "w":8,
                 "x":16,
                 "y":13
              },
              "id":20,
              "interval":null,
              "links":[

              ],
              "mappingType":1,
              "mappingTypes":[
                 {
                    "name":"value to text",
                    "value":1
                 },
                 {
                    "name":"range to text",
                    "value":2
                 }
              ],
              "maxDataPoints":100,
              "nullPointMode":"connected",
              "nullText":null,
              "postfix":"",
              "postfixFontSize":"50%",
              "prefix":"",
              "prefixFontSize":"50%",
              "rangeMaps":[
                 {
                    "from":"null",
                    "text":"N/A",
                    "to":"null"
                 }
              ],
              "sparkline":{
                 "fillColor":"#3f6833",
                 "full":true,
                 "lineColor":"rgb(31, 120, 193)",
                 "show":true
              },
              "tableColumn":"",
              "targets":[
                 {
                    "expr":"sum(kong_nginx_connections_total{state=\"accepted\", instance=~\"$instance\"})",
                    "format":"time_series",
                    "intervalFactor":2,
                    "legendFormat":"Accepted",
                    "refId":"A"
                 }
              ],
              "thresholds":"",
              "title":"Accepted Connections",
              "type":"singlestat",
              "valueFontSize":"80%",
              "valueMaps":[
                 {
                    "op":"=",
                    "text":"N/A",
                    "value":"null"
                 }
              ],
              "valueName":"current"
           }
        ],
        "title":"Nginx",
        "type":"row"
     }
  ],
  "refresh":false,
  "schemaVersion":22,
  "style":"dark",
  "tags":[

  ],
  "templating":{
     "list":[
        {
           "allValue":".*",
           "current":{

           },
           "datasource":"${DS_PROMETHEUS}",
           "definition":"label_values(kong_http_requests_total,service)",
           "description":null,
           "error":null,
           "hide":0,
           "includeAll":true,
           "index":-1,
           "label":"",
           "multi":true,
           "name":"service",
           "options":[

           ],
           "query":"label_values(kong_http_requests_total,service)",
           "refresh":1,
           "regex":"",
           "skipUrlSync":false,
           "sort":1,
           "tagValuesQuery":"",
           "tags":[

           ],
           "tagsQuery":"",
           "type":"query",
           "useTags":false
        },
        {
           "allValue":".*",
           "current":{

           },
           "datasource":"${DS_PROMETHEUS}",
           "definition":"label_values(kong_nginx_connections_total,instance)",
           "description":null,
           "error":null,
           "hide":0,
           "includeAll":true,
           "index":-1,
           "label":"",
           "multi":true,
           "name":"instance",
           "options":[

           ],
           "query":"label_values(kong_nginx_connections_total,instance)",
           "refresh":2,
           "regex":".*",
           "skipUrlSync":false,
           "sort":1,
           "tagValuesQuery":"",
           "tags":[

           ],
           "tagsQuery":"",
           "type":"query",
           "useTags":false
        },
        {
           "allValue":".*",
           "current":{

           },
           "datasource":"${DS_PROMETHEUS}",
           "definition":"label_values(kong_http_requests_total,route)",
           "description":"Ingress",
           "error":null,
           "hide":0,
           "includeAll":true,
           "index":-1,
           "label":"",
           "multi":true,
           "name":"route",
           "options":[

           ],
           "query":"label_values(kong_http_requests_total,route)",
           "refresh":1,
           "regex":"",
           "skipUrlSync":false,
           "sort":1,
           "tagValuesQuery":"",
           "tags":[

           ],
           "tagsQuery":"",
           "type":"query",
           "useTags":false
        },
        {
           "allValue":null,
           "current":{

           },
           "datasource":"${DS_PROMETHEUS}",
           "definition":"label_values(kong_upstream_target_health, upstream)",
           "hide":0,
           "includeAll":true,
           "index":-1,
           "label":null,
           "multi":true,
           "name":"upstream",
           "options":[

           ],
           "query":"label_values(kong_upstream_target_health, upstream)",
           "refresh":1,
           "regex":"",
           "skipUrlSync":false,
           "sort":0,
           "tagValuesQuery":"",
           "tags":[

           ],
           "tagsQuery":"",
           "type":"query",
           "useTags":false
        },
        {
           "current":{
              "selected":false,
              "text":"Prometheus",
              "value":"Prometheus"
           },
           "description":null,
           "error":null,
           "hide":0,
           "includeAll":false,
           "label":"Datasource",
           "multi":false,
           "name":"DS_PROMETHEUS",
           "options":[

           ],
           "query":"prometheus",
           "refresh":1,
           "regex":"",
           "skipUrlSync":false,
           "type":"datasource"
        }
     ]
  },
  "time":{
     "from":"now-15m",
     "to":"now"
  },
  "timepicker":{
     "refresh_intervals":[
        "5s",
        "10s",
        "30s",
        "1m",
        "5m",
        "15m",
        "30m",
        "1h",
        "2h",
        "1d"
     ],
     "time_options":[
        "5m",
        "15m",
        "1h",
        "6h",
        "12h",
        "24h",
        "2d",
        "7d",
        "30d"
     ]
  },
  "timezone":"",
  "title":"Kong (official)",
  "uid":"mY9p7dQmz",
  "variables":{
     "list":[

     ]
  },
  "version":9
}
